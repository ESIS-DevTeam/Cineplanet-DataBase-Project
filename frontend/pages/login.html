<!DOCTYPE html>
<html>
<head>
    <title>Login Socio</title>
    <script>
    // Obtiene el parÃ¡metro redirect de la URL
    function getRedirect() {
        const params = new URLSearchParams(window.location.search);
        return params.get('redirect') || 'index.html';
    }

    function enviarLogin(event) {
        event.preventDefault();
        const form = event.target;
        const datos = new FormData(form);

        fetch('../../backend/auth/login.php', {
            method: 'POST',
            body: datos
        })
        .then(res => res.json())
        .then(data => {
            if (data.success) {
                window.location.href = getRedirect();
            } else {
                alert(data.message || 'Error de login');
            }
        })
        .catch(() => alert('Error de conexion'));
    }
    </script>
</head>
<body>
    <h2>Iniciar sesion como socio</h2>
    <form method="POST" action="../../backend/auth/login.php" onsubmit="enviarLogin(event)">
        <label>Numero de documento (DNI):</label>
        <input type="text" name="numeroDocumento" required><br>
        <label>Contrasenia:</label>
        <input type="password" name="password" required><br>
        <button type="submit">Ingresar</button>
    </form>
</body>
</html>